# EnvCLI

> **è·¨å¹³å°ç¯å¢ƒå˜é‡ç®¡ç†å·¥å…·** | **ç‰ˆæœ¬**: v0.1.0

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ç±»å‹ | æ–‡ä»¶ | è¯´æ˜ |
|----------|------|------|
| **ç”¨æˆ·æŒ‡å—** | [user-guide.md](user-guide.md) | å®‰è£…ã€å¿«é€Ÿä¸Šæ‰‹ã€å¸¸ç”¨å‘½ä»¤ |
| **å¼€å‘æŒ‡å—** | [development-guide.md](development-guide.md) | æ’ä»¶å¼€å‘ã€æ¶æ„åŸåˆ™ã€æœ€ä½³å®è·µ |
| **å˜æ›´æ—¥å¿—** | [CHANGELOG.md](CHANGELOG.md) | ç‰ˆæœ¬æ›´æ–°è®°å½• |
| **é¡¹ç›®æ¦‚è§ˆ** | æœ¬æ–‡ä»¶ | æ ¸å¿ƒç‰¹æ€§ã€æ¶æ„ã€çŠ¶æ€ |

---

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### å››å±‚æ¶æ„å­˜å‚¨å¼•æ“
```
Local > Project > User > System
```
- **Local**: é¡¹ç›®æœ¬åœ°é…ç½® (`./.envcli/local.env`)
- **Project**: å›¢é˜Ÿå…±äº«é…ç½® (`./.envcli/project.env`)
- **User**: ä¸ªäººå…¨å±€é…ç½® (`~/.envcli/user.env`)
- **System**: æœºå™¨å…¨å±€é…ç½® (ç³»ç»Ÿç¯å¢ƒå˜é‡)

### æ’ä»¶ç³»ç»Ÿ
- âœ… åŠ¨æ€åº“åŠ è½½ (.so/.dll)
- âœ… å¤–éƒ¨å¯æ‰§è¡Œæ’ä»¶
- âœ… Shell/Python è„šæœ¬
- âœ… Ed25519 ç­¾åéªŒè¯
- âœ… çƒ­é‡è½½ç›‘æ§ (500ms é˜²æŠ–)
- âœ… é’©å­ç³»ç»Ÿ (PreCommand/PostCommand/Error/PreSet/PostGet)

### æ¨¡æ¿ç³»ç»Ÿ
- âœ… `{{VAR}}` è¯­æ³•
- âœ… é»˜è®¤å€¼ `{{VAR|default}}`
- âœ… å¤šå±‚ç»§æ‰¿
- âœ… å¾ªç¯ä¾èµ–æ£€æµ‹

### å®‰å…¨ç‰¹æ€§
- âœ… SOPS é›†æˆ (Age/GPG)
- âœ… åŠ å¯†å­˜å‚¨
- âœ… ç­¾åéªŒè¯
- âœ… æƒé™æ§åˆ¶

### æ€§èƒ½ä¼˜åŒ–
- âœ… ç³»ç»Ÿç¯å¢ƒç¼“å­˜ (60ç§’ TTL)
- âœ… æ–‡ä»¶å†…å®¹ç¼“å­˜ (åŸºäºä¿®æ”¹æ—¶é—´)
- âœ… ç¯å¢ƒå˜é‡åˆå¹¶ä¼˜åŒ– (4æ¬¡â†’1æ¬¡)
- âœ… 80-90% I/O æ€§èƒ½æå‡

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### æºä»£ç ç»„ç»‡
```
src/
â”œâ”€â”€ main.rs                    # ä¸»ç¨‹åºå…¥å£ (1724è¡Œ)
â”‚   â”œâ”€â”€ main()                 # å…¥å£å‡½æ•° (50è¡Œ)
â”‚   â”œâ”€â”€ run_command()          # å‘½ä»¤è·¯ç”± (120è¡Œ)
â”‚   â”œâ”€â”€ 8ä¸ªå‘½ä»¤åˆ†ç»„å¤„ç†å‡½æ•°     # èŒè´£åˆ†ç¦»
â”‚   â””â”€â”€ 27ä¸ªè¾…åŠ©å‡½æ•°           # DRYåŸåˆ™
â”œâ”€â”€ cli.rs                    # CLI å‚æ•°è§£æ
â”œâ”€â”€ types.rs                  # æ ¸å¿ƒæ•°æ®ç»“æ„
â”œâ”€â”€ error.rs                  # é”™è¯¯å¤„ç†ç³»ç»Ÿ
â”œâ”€â”€ core/store.rs             # æ ¸å¿ƒå­˜å‚¨å¼•æ“
â”œâ”€â”€ plugin/                   # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ manager.rs           # æ’ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ signature.rs         # ç­¾åéªŒè¯
â”‚   â”œâ”€â”€ watcher.rs           # çƒ­é‡è½½ç›‘æ§
â”‚   â””â”€â”€ hook.rs              # é’©å­ç³»ç»Ÿ
â”œâ”€â”€ template/                 # æ¨¡æ¿ç³»ç»Ÿ
â”‚   â”œâ”€â”€ parser.rs            # æ¨¡æ¿è§£æå™¨
â”‚   â””â”€â”€ renderer.rs          # æ¨¡æ¿æ¸²æŸ“å™¨
â””â”€â”€ utils/                    # å·¥å…·æ¨¡å—
    â”œâ”€â”€ encryption.rs        # SOPS åŠ å¯†
    â”œâ”€â”€ paths.rs             # è·¨å¹³å°è·¯å¾„
    â””â”€â”€ system_env.rs        # ç³»ç»Ÿç¯å¢ƒç®¡ç†
```

### ä¸»ç¨‹åºæ¶æ„
```
main() â†’ run_command() â†’ 8ä¸ªå‘½ä»¤åˆ†ç»„å¤„ç†å‡½æ•°
â”œâ”€â”€ handle_read_commands()      # Get, List, Export, Status
â”œâ”€â”€ handle_write_commands()     # Set, Unset, Import
â”œâ”€â”€ handle_plugin_commands()    # Plugin å­å‘½ä»¤
â”œâ”€â”€ handle_encrypt_commands()   # Encrypt, Decrypt, SetEncrypt
â”œâ”€â”€ handle_system_commands()    # SystemSet, SystemUnset, Doctor, Run
â”œâ”€â”€ handle_template_commands()  # Template å­å‘½ä»¤
â”œâ”€â”€ handle_config_commands()    # Config å­å‘½ä»¤
â””â”€â”€ handle_cache_commands()     # Cache å­å‘½ä»¤
```

---

## ğŸ“Š ä»£ç è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | çŠ¶æ€ | è¯¦æƒ… |
|------|------|------|
| **åŠŸèƒ½å®Œæ•´æ€§** | âœ… ä¼˜ç§€ | æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å®ç° |
| **æµ‹è¯•è¦†ç›–** | âœ… ä¼˜ç§€ | 308+ æµ‹è¯•ï¼Œ100% é€šè¿‡ |
| **è·¨å¹³å°æ”¯æŒ** | âœ… è‰¯å¥½ | Windows/Linux/macOS |
| **ä»£ç è´¨é‡** | âœ… ä¼˜ç§€ | 0 é”™è¯¯ï¼Œ0 Clippy è­¦å‘Š |
| **æ¶æ„è®¾è®¡** | âœ… ä¼˜ç§€ | KISS/DRY/LOD åŸåˆ™ |
| **æ–‡æ¡£å®Œæ•´åº¦** | âœ… ä¼˜ç§€ | ç”¨æˆ·æŒ‡å— + å¼€å‘æŒ‡å— |

### é‡æ„æˆæœ
- **ä¸»å‡½æ•°**: 375+ è¡Œ â†’ 50 è¡Œ (â¬‡ï¸ 87%)
- **run_command**: 375+ è¡Œ â†’ 120 è¡Œ (â¬‡ï¸ 68%)
- **ä»£ç é‡å¤**: 0 (æå– 27 ä¸ªè¾…åŠ©å‡½æ•°)
- **æµ‹è¯•ä»£ç **: 1165 è¡Œï¼Œ100% é€šè¿‡ç‡

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### ä½œä¸ºç”¨æˆ·
```bash
# 1. é˜…è¯»ç”¨æˆ·æŒ‡å—
cat docs/user-guide.md

# 2. 5åˆ†é’Ÿä¸Šæ‰‹
# æŒ‰ç…§ user-guide.md çš„å¿«é€Ÿä¸Šæ‰‹ç« èŠ‚æ“ä½œ

# 3. å¥åº·æ£€æŸ¥
envcli doctor
```

### ä½œä¸ºå¼€å‘è€…
```bash
# 1. é˜…è¯»å¼€å‘æŒ‡å—
cat docs/development-guide.md

# 2. å¼€å‘æ’ä»¶
# å‚è€ƒ development-guide.md çš„æ’ä»¶å¼€å‘ç« èŠ‚

# 3. è¿è¡Œæµ‹è¯•
cargo test
```

---

## ğŸ”— ç›¸å…³èµ„æº

- **æºä»£ç **: `src/` ç›®å½•
- **æµ‹è¯•**: `src/**/tests.rs` å’Œ `src/**/integration_tests.rs`
- **é…ç½®**: `Cargo.toml`
- **CI/CD**: `.github/workflows/`

---

## ğŸ“ æäº¤è§„èŒƒ

```bash
# é‡æ„
git commit -m "refactor: Simplify main.rs with KISS/DRY/LOD principles"

# åŠŸèƒ½å¢å¼º
git commit -m "feat: UXå¢å¼º + æ–‡æ¡£å®Œå–„"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf: å®ç°æ€§èƒ½ç¼“å­˜ä¼˜åŒ–"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: é‡æ„æ–‡æ¡£ç³»ç»Ÿï¼Œä¼˜åŒ–é¡¹ç›®ç»“æ„"
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2025-12-31
**ç»´æŠ¤è€…**: EnvCLI å›¢é˜Ÿ
